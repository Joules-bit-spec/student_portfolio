{% extends "layout.html" %} {% block title %}{{ current_user.username }}'s Portfolio{% endblock %} {%
block content %}
<div class="portfolio-container">
  <h2 class="text-center mb-20">
    {{ current_user.username }}'s Public Portfolio
  </h2>

  <!-- Add New Project Section -->
  <div class="mb-20">
    <h3>Add New Project</h3>
    <form method="POST" enctype="multipart/form-data">
      <div class="form-group">
        <label for="title">Title:</label>
        <input
          type="text"
          id="title"
          name="title"
          required
        />
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea
          id="description"
          name="description"
          rows="4"
          required
        ></textarea>
      </div>
      <div class="form-group">
        <label for="image">Image:</label>
        <input
          type="file"
          id="image"
          name="image"
          accept="image/*"
        />
      </div>
      <button type="submit" class="btn btn-primary">Add Project</button>
    </form>
  </div>

  <hr style="margin: 40px 0; border: none; border-top: 2px solid #f5f5f5;" />

  <!-- Existing Projects Section -->
  <div class="existing-projects">
    <h3>Projects</h3>
    {% if projects %}
    <div class="projects-grid">
      {% for p in projects %}
      <div class="project-card">
        <div class="project-card-image">
          {% if p.image_file %}
          <img
            src="{{ url_for('static', filename='uploads/' + p.image_file) }}"
            alt="{{ p.title }}"
          />
          {% else %}
          <div style="display: flex; align-items: center; justify-content: center; height: 100%; background-color: #f0f0f0; color: #999;">
            No Image
          </div>
          {% endif %}
        </div>
        <div class="project-card-content">
          <h4 class="project-card-title">{{ p.title }}</h4>
          <p class="project-card-description">{{ p.description }}</p>
          <p class="text-muted" style="font-size: 12px;">{{ p.date_posted.strftime('%Y-%m-%d') }}</p>
        </div>
        <div class="project-card-footer">
          <a href="{{ url_for('edit_project', id=p.id) }}">Edit</a>
          <a
            href="{{ url_for('delete_project', id=p.id) }}"
            onclick="return confirm('Delete this project?')"
            style="background-color: #dc3545;"
          >Delete</a>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <p class="text-muted text-center">No projects yet. Start adding your projects! ðŸš€</p>
    {% endif %}
  </div>
</div>
{% endblock %}
