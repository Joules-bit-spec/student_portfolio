{% extends "layout.html" %}
{% block title %}Profile{% endblock %}
{% block content %}
<div class="narrow-md">
  <!-- Profile Card Header -->
  <div class="text-center" style="margin-bottom: 20px;">
    <div class="profile-avatar" style="margin: 0 auto 12px; background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%); color: white; font-size: 44px; font-weight: bold; display:flex; align-items:center; justify-content:center;">{{ current_user.username[0].upper() }}</div>
    <h2 style="margin: 0 0 5px 0;">{{ current_user.username }}</h2>
    <p class="profile-bio" style="margin: 0;">{{ current_user.course or 'Student' }}</p>
  </div>

  <div class="card" style="margin-bottom:16px;">
    <h3 style="margin-top:0; margin-bottom:16px; color:var(--primary-color);">Edit Profile</h3>

    <form method="POST">
      <div class="form-group">
        <label for="username">Username</label>
        <input type="text" id="username" name="username" value="{{ current_user.username }}" required />
      </div>

      <div class="form-group">
        <label for="course">Course / Major</label>
        <input type="text" id="course" name="course" value="{{ current_user.course or '' }}" placeholder="e.g., Computer Science" />
      </div>

      <div class="form-group">
        <label for="bio">Bio</label>
        <textarea id="bio" name="bio">{{ current_user.bio }}</textarea>
      </div>

      <div style="display:flex; gap:10px; margin-top:12px;">
        <button type="submit" class="btn btn-primary" style="flex:1;">Save Changes</button>
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary" style="flex:1; text-align:center;">Cancel</a>
      </div>
    </form>
  </div>

  <div class="text-center">
    <p class="text-muted" style="margin: 0;"><a href="{{ url_for('public_portfolio', username=current_user.username) }}" target="_blank" class="text-primary" style="font-weight:600;">View Public Portfolio â†’</a></p>
  </div>
</div>
{% endblock %}
