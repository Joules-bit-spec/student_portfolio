{% extends "layout.html" %} {% block title %}Projects{% endblock %} {% block
content %}
<div style="max-width: 800px; margin: 0 auto; padding: 0 20px;">
  <h2 style="margin-bottom: 30px;">My Projects</h2>

  <!-- Add New Project Form Card -->
  <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 40px;">
    <h3 style="margin-top: 0; margin-bottom: 20px; color: #5c4a3a; font-size: 18px;">âž• Add New Project</h3>
    <form method="POST" enctype="multipart/form-data">
      <div class="form-group">
        <label for="title">Project Title *</label>
        <input type="text" id="title" name="title" placeholder="e.g., Student Portfolio Website" required />
      </div>
      <div class="form-group">
        <label for="description">Description *</label>
        <textarea id="description" name="description" placeholder="Describe your project..." required style="min-height: 100px;"></textarea>
      </div>
      <div class="form-group">
        <label for="image">Project Image</label>
        <input type="file" id="image" name="image" accept="image/*" />
        <p class="text-muted" style="font-size: 12px; margin-top: 5px;">Accepted formats: JPG, PNG (optional)</p>
      </div>
      <button type="submit" class="btn btn-primary" style="width: 100%;">Add Project</button>
    </form>
  </div>

  <!-- Your Projects Section -->
  <h3 style="margin-bottom: 20px;">Your Projects</h3>
  {% if projects %}
  <div style="display: flex; flex-direction: column; gap: 15px;">
    {% for p in projects %}
    <div style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: all 0.3s ease; border-left: 4px solid #5c4a3a;">
      <div style="display: flex; gap: 0;">
        <!-- Project Image -->
        <div style="width: 120px; height: 120px; flex-shrink: 0; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; overflow: hidden;">
          {% if p.image_file %}
          <img src="{{ url_for('static', filename='uploads/' + p.image_file) }}" alt="{{ p.title }}" style="width: 100%; height: 100%; object-fit: cover;" />
          {% else %}
          <span style="color: #999; font-size: 12px;">No Image</span>
          {% endif %}
        </div>
        
        <!-- Project Info -->
        <div style="flex: 1; padding: 20px;">
          <h4 style="margin: 0 0 8px 0; color: #333; font-size: 18px;">{{ p.title }}</h4>
          <p style="margin: 0 0 12px 0; color: #666; font-size: 14px; line-height: 1.5;">{{ p.description[:100] }}{% if p.description|length > 100 %}...{% endif %}</p>
          <p class="text-muted" style="font-size: 12px; margin: 0;">ðŸ“… {{ p.date_posted.strftime('%b %d, %Y') }}</p>
        </div>

        <!-- Actions -->
        <div style="padding: 20px; display: flex; flex-direction: column; gap: 8px; justify-content: center;">
          <a href="{{ url_for('edit_project', id=p.id) }}" class="btn btn-primary" style="font-size: 14px; padding: 8px 16px; text-align: center; white-space: nowrap;">Edit</a>
          <a href="{{ url_for('delete_project', id=p.id) }}" onclick="return confirm('Delete this project?')" class="btn btn-primary" style="background-color: #dc3545; font-size: 14px; padding: 8px 16px; text-align: center; white-space: nowrap;">Delete</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div style="background: white; padding: 40px; border-radius: 8px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
    <p class="text-muted" style="font-size: 16px; margin: 0;">No projects yet. Create your first project above! ðŸš€</p>
  </div>
  {% endif %}
</div>
{% endblock %}
