{% extends "layout.html" %} {% block title %}Projects{% endblock %} {% block
content %}
<h2>Add New Project</h2>
<form method="POST" enctype="multipart/form-data">
  <label>Title:</label><br /><input type="text" name="title" required /><br />
  <label>Description:</label><br /><textarea name="description"></textarea
  ><br />
  <label>Image:</label><br /><input
    type="file"
    name="image"
    accept="image/*"
  /><br />
  <button type="submit">Add Project</button>
</form>
<hr />
<h3>Your Projects</h3>
<table>
  <tr>
    <th>Image</th>
    <th>Title</th>
    <th>Description</th>
    <th>Date</th>
    <th>Action</th>
  </tr>
  {% for p in projects %}
  <tr>
    <td>
      {% if p.image_file %}<img
        src="{{ url_for('static', filename='uploads/' + p.image_file) }}"
        width="100"
      />{% else %}No Image{% endif %}
    </td>
    <td>{{ p.title }}</td>
    <td>{{ p.description }}</td>
    <td>{{ p.date_posted.strftime('%Y-%m-%d') }}</td>
    <td>
      <a href="{{ url_for('edit_project', id=p.id) }}">Edit</a> |
      <a
        href="{{ url_for('delete_project', id=p.id) }}"
        onclick="return confirm('Delete?')"
        >Delete</a
      >
    </td>
  </tr>
  {% else %}
  <tr>
    <td colspan="5">No projects yet.</td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
